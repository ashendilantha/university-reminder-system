<!--&lt;!&ndash;<!DOCTYPE html>&ndash;&gt;-->
<!--&lt;!&ndash;<html xmlns:th="http://www.thymeleaf.org">&ndash;&gt;-->
<!--&lt;!&ndash;<head th:replace="fragments/layout :: head('Login')">&ndash;&gt;-->
<!--&lt;!&ndash;    <title>Login - University Reminder System</title>&ndash;&gt;-->
<!--&lt;!&ndash;</head>&ndash;&gt;-->
<!--&lt;!&ndash;<body>&ndash;&gt;-->
<!--&lt;!&ndash;<nav th:replace="fragments/layout :: navbar"></nav>&ndash;&gt;-->

<!--&lt;!&ndash;<div th:replace="fragments/layout :: alerts"></div>&ndash;&gt;-->

<!--&lt;!&ndash;<div class="container py-5">&ndash;&gt;-->
<!--&lt;!&ndash;    <div class="row justify-content-center">&ndash;&gt;-->
<!--&lt;!&ndash;        <div class="col-md-6">&ndash;&gt;-->
<!--&lt;!&ndash;            <div class="card shadow">&ndash;&gt;-->
<!--&lt;!&ndash;                <div class="card-header bg-primary text-white text-center">&ndash;&gt;-->
<!--&lt;!&ndash;                    <h4 class="mb-0">Login to Your Account</h4>&ndash;&gt;-->
<!--&lt;!&ndash;                </div>&ndash;&gt;-->
<!--&lt;!&ndash;                <div class="card-body p-4">&ndash;&gt;-->
<!--&lt;!&ndash;                    <div class="alert alert-danger" id="error-message" style="display: none;">&ndash;&gt;-->
<!--&lt;!&ndash;                        Invalid email or password&ndash;&gt;-->
<!--&lt;!&ndash;                    </div>&ndash;&gt;-->
<!--&lt;!&ndash;                    <div class="alert alert-success" th:if="${param.logout}">&ndash;&gt;-->
<!--&lt;!&ndash;                        You have been logged out&ndash;&gt;-->
<!--&lt;!&ndash;                    </div>&ndash;&gt;-->
<!--&lt;!&ndash;                    <div class="alert alert-danger" th:if="${param.error}">&ndash;&gt;-->
<!--&lt;!&ndash;                        Invalid login attempt. Please try again.&ndash;&gt;-->
<!--&lt;!&ndash;                    </div>&ndash;&gt;-->

<!--&lt;!&ndash;                    <form id="loginForm">&ndash;&gt;-->
<!--&lt;!&ndash;                        <div class="mb-3">&ndash;&gt;-->
<!--&lt;!&ndash;                            <label for="email" class="form-label">Email</label>&ndash;&gt;-->
<!--&lt;!&ndash;                            <input type="email" class="form-control" id="email" name="email" required autofocus>&ndash;&gt;-->
<!--&lt;!&ndash;                        </div>&ndash;&gt;-->
<!--&lt;!&ndash;                        <div class="mb-3">&ndash;&gt;-->
<!--&lt;!&ndash;                            <label for="password" class="form-label">Password</label>&ndash;&gt;-->
<!--&lt;!&ndash;                            <input type="password" class="form-control" id="password" name="password" required>&ndash;&gt;-->
<!--&lt;!&ndash;                        </div>&ndash;&gt;-->
<!--&lt;!&ndash;                        <div class="d-grid">&ndash;&gt;-->
<!--&lt;!&ndash;                            <button type="submit" class="btn btn-primary">Login</button>&ndash;&gt;-->
<!--&lt;!&ndash;                        </div>&ndash;&gt;-->
<!--&lt;!&ndash;                    </form>&ndash;&gt;-->
<!--&lt;!&ndash;                </div>&ndash;&gt;-->
<!--&lt;!&ndash;            </div>&ndash;&gt;-->
<!--&lt;!&ndash;        </div>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->
<!--&lt;!&ndash;</div>&ndash;&gt;-->

<!--&lt;!&ndash;<footer th:replace="fragments/layout :: footer"></footer>&ndash;&gt;-->

<!--&lt;!&ndash;<script>&ndash;&gt;-->
<!--&lt;!&ndash;    document.getElementById('loginForm').addEventListener('submit', async function(e) {&ndash;&gt;-->
<!--&lt;!&ndash;        e.preventDefault();&ndash;&gt;-->

<!--&lt;!&ndash;        const email = document.getElementById('email').value;&ndash;&gt;-->
<!--&lt;!&ndash;        const password = document.getElementById('password').value;&ndash;&gt;-->
<!--&lt;!&ndash;        const errorMessageDiv = document.getElementById('error-message');&ndash;&gt;-->

<!--&lt;!&ndash;        try {&ndash;&gt;-->
<!--&lt;!&ndash;            const response = await fetch('/api/auth/login', {&ndash;&gt;-->
<!--&lt;!&ndash;                method: 'POST',&ndash;&gt;-->
<!--&lt;!&ndash;                headers: {&ndash;&gt;-->
<!--&lt;!&ndash;                    'Content-Type': 'application/json'&ndash;&gt;-->
<!--&lt;!&ndash;                },&ndash;&gt;-->
<!--&lt;!&ndash;                body: JSON.stringify({ email, password })&ndash;&gt;-->
<!--&lt;!&ndash;            });&ndash;&gt;-->

<!--&lt;!&ndash;            if (response.ok) {&ndash;&gt;-->
<!--&lt;!&ndash;                const data = await response.json();&ndash;&gt;-->
<!--&lt;!&ndash;                // Redirect to the endpoint that will establish the server session&ndash;&gt;-->
<!--&lt;!&ndash;                window.location.href = '/auth/jwt-login?token=' + data.accessToken;&ndash;&gt;-->
<!--&lt;!&ndash;            } else {&ndash;&gt;-->
<!--&lt;!&ndash;                errorMessageDiv.style.display = 'block';&ndash;&gt;-->
<!--&lt;!&ndash;                errorMessageDiv.textContent = 'Invalid email or password.';&ndash;&gt;-->
<!--&lt;!&ndash;            }&ndash;&gt;-->
<!--&lt;!&ndash;        } catch (error) {&ndash;&gt;-->
<!--&lt;!&ndash;            console.error('Login error:', error);&ndash;&gt;-->
<!--&lt;!&ndash;            errorMessageDiv.style.display = 'block';&ndash;&gt;-->
<!--&lt;!&ndash;            errorMessageDiv.textContent = 'An error occurred. Please try again later.';&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->
<!--&lt;!&ndash;    });&ndash;&gt;-->
<!--&lt;!&ndash;</script>&ndash;&gt;-->
<!--&lt;!&ndash;</body>&ndash;&gt;-->
<!--&lt;!&ndash;</html>&ndash;&gt;-->


<!--&lt;!&ndash; -->
<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org">-->
<!--<head th:replace="~{fragments/layout :: head('Login')}">-->
<!--    <title>Login - University Reminder System</title>-->
<!--</head>-->
<!--<body>-->
<!--<nav th:replace="~{fragments/layout :: navbar}"></nav>-->

<!--<div th:replace="~{fragments/layout :: alerts}"></div>-->

<!--<div class="container py-5">-->
<!--    <div class="row justify-content-center">-->
<!--        <div class="col-md-6">-->
<!--            <div class="card shadow">-->
<!--                <div class="card-header bg-primary text-white text-center">-->
<!--                    <h4 class="mb-0">Login to Your Account</h4>-->
<!--                </div>-->
<!--                <div class="card-body p-4">-->
<!--                    <div class="alert alert-danger" id="error-message" style="display: none;">-->
<!--                        Invalid email or password-->
<!--                    </div>-->
<!--                    <div class="alert alert-success" th:if="${param.logout}">-->
<!--                        You have been logged out-->
<!--                    </div>-->
<!--                    <div class="alert alert-danger" th:if="${param.error}">-->
<!--                        Invalid login attempt. Please try again.-->
<!--                    </div>-->

<!--                    <form id="loginForm">-->
<!--                        <div class="mb-3">-->
<!--                            <label for="email" class="form-label">Email</label>-->
<!--                            <input type="email" class="form-control" id="email" name="email" required autofocus>-->
<!--                        </div>-->
<!--                        <div class="mb-3">-->
<!--                            <label for="password" class="form-label">Password</label>-->
<!--                            <input type="password" class="form-control" id="password" name="password" required>-->
<!--                        </div>-->
<!--                        <div class="d-grid">-->
<!--                            <button type="submit" class="btn btn-primary">Login</button>-->
<!--                        </div>-->
<!--                    </form>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--<footer th:replace="~{fragments/layout :: footer}"></footer>-->

<!--<script>-->
<!--    document.getElementById('loginForm').addEventListener('submit', async function(e) {-->
<!--        e.preventDefault();-->

<!--        const email = document.getElementById('email').value;-->
<!--        const password = document.getElementById('password').value;-->
<!--        const errorMessageDiv = document.getElementById('error-message');-->

<!--        try {-->
<!--            const response = await fetch('/api/auth/login', {-->
<!--                method: 'POST',-->
<!--                headers: {-->
<!--                    'Content-Type': 'application/json'-->
<!--                },-->
<!--                body: JSON.stringify({ email, password })-->
<!--            });-->

<!--            if (response.ok) {-->
<!--                const data = await response.json();-->
<!--                // Redirect to the endpoint that will establish the server session-->
<!--                window.location.href = '/auth/jwt-login?token=' + data.accessToken;-->
<!--            } else {-->
<!--                errorMessageDiv.style.display = 'block';-->
<!--                errorMessageDiv.textContent = 'Invalid email or password.';-->
<!--            }-->
<!--        } catch (error) {-->
<!--            console.error('Login error:', error);-->
<!--            errorMessageDiv.style.display = 'block';-->
<!--            errorMessageDiv.textContent = 'An error occurred. Please try again later.';-->
<!--        }-->
<!--    });-->

<!--    // Debugging script-->
<!--    const urlParams = new URLSearchParams(window.location.search);-->
<!--    if (urlParams.has('error')) {-->
<!--        console.error('Login error detected in URL parameter');-->
<!--    }-->
<!--    if (urlParams.has('debug')) {-->
<!--        console.log('Current URL:', window.location.href);-->
<!--    }-->

<!--</script>-->
<!--</body>-->
<!--</html> &ndash;&gt;-->



<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org" lang="en" data-bs-theme="dark">-->
<!--<head th:replace="~{fragments/layout :: head('Login')}">-->
<!--    <title>Login - University Reminder System</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">-->
<!--    <style>-->
<!--        :root {-->
<!--            &#45;&#45;primary: #2C3E50;-->
<!--            &#45;&#45;primary-dark: #1a2530;-->
<!--            &#45;&#45;primary-light: #34495e;-->
<!--            &#45;&#45;secondary: #1ABC9C;-->
<!--            &#45;&#45;secondary-light: #3498DB;-->
<!--            &#45;&#45;accent: #E67E22;-->
<!--            &#45;&#45;accent-alt: #2ECC71;-->
<!--            &#45;&#45;error: #E74C3C;-->
<!--            &#45;&#45;warning: #F1C40F;-->
<!--            &#45;&#45;background: #121212;-->
<!--            &#45;&#45;background-alt: #1e1e1e;-->
<!--            &#45;&#45;card-bg: #1e2a38;-->
<!--            &#45;&#45;text-primary: #e4e6eb;-->
<!--            &#45;&#45;text-secondary: #b0b3b8;-->
<!--            &#45;&#45;white: #FFFFFF;-->
<!--            &#45;&#45;dark: #0d1117;-->
<!--        }-->
<!--        -->
<!--        body {-->
<!--            background-color: var(&#45;&#45;background);-->
<!--            color: var(&#45;&#45;text-primary);-->
<!--            min-height: 100vh;-->
<!--            display: flex;-->
<!--            flex-direction: column;-->
<!--            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;-->
<!--            line-height: 1.6;-->
<!--        }-->
<!--        -->
<!--        .navbar {-->
<!--            background-color: var(&#45;&#45;primary-dark) !important;-->
<!--            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.4);-->
<!--            padding: 0.8rem 1rem;-->
<!--        }-->
<!--        -->
<!--        .navbar-brand, .nav-link {-->
<!--            color: var(&#45;&#45;white) !important;-->
<!--            font-weight: 500;-->
<!--        }-->
<!--        -->
<!--        .navbar-nav .nav-link:hover {-->
<!--            color: var(&#45;&#45;secondary) !important;-->
<!--        }-->
<!--        -->
<!--        .navbar-toggler {-->
<!--            border: none;-->
<!--            color: var(&#45;&#45;white);-->
<!--        }-->
<!--        -->
<!--        .card {-->
<!--            background-color: var(&#45;&#45;card-bg);-->
<!--            border: none;-->
<!--            border-radius: 15px;-->
<!--            overflow: hidden;-->
<!--            transition: all 0.3s ease;-->
<!--            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);-->
<!--            height: 100%;-->
<!--        }-->
<!--        -->
<!--        .card:hover {-->
<!--            transform: translateY(-10px);-->
<!--            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);-->
<!--        }-->
<!--        -->
<!--        .card-header {-->
<!--            background: linear-gradient(135deg, var(&#45;&#45;primary) 0%, var(&#45;&#45;primary-dark) 100%);-->
<!--            color: var(&#45;&#45;white);-->
<!--            font-weight: 600;-->
<!--            padding: 1.5rem;-->
<!--        }-->
<!--        -->
<!--        .card-body {-->
<!--            padding: 2.5rem 2rem;-->
<!--        }-->
<!--        -->
<!--        .btn-primary {-->
<!--            background: linear-gradient(135deg, var(&#45;&#45;accent) 0%, var(&#45;&#45;accent-alt) 100%);-->
<!--            border: none;-->
<!--            padding: 0.8rem 2.5rem;-->
<!--            font-weight: 600;-->
<!--            border-radius: 50px;-->
<!--            transition: all 0.3s ease;-->
<!--            box-shadow: 0 4px 15px rgba(230, 126, 34, 0.3);-->
<!--            position: relative;-->
<!--            overflow: hidden;-->
<!--            z-index: 1;-->
<!--        }-->
<!--        -->
<!--        .btn-primary::before {-->
<!--            content: '';-->
<!--            position: absolute;-->
<!--            top: 0;-->
<!--            left: 0;-->
<!--            width: 0%;-->
<!--            height: 100%;-->
<!--            background: linear-gradient(135deg, var(&#45;&#45;accent-alt) 0%, var(&#45;&#45;accent) 100%);-->
<!--            transition: all 0.5s ease;-->
<!--            z-index: -1;-->
<!--            border-radius: 50px;-->
<!--        }-->
<!--        -->
<!--        .btn-primary:hover::before {-->
<!--            width: 100%;-->
<!--        }-->
<!--        -->
<!--        .btn-primary:hover {-->
<!--            transform: translateY(-3px);-->
<!--            box-shadow: 0 10px 20px rgba(230, 126, 34, 0.4);-->
<!--        }-->
<!--        -->
<!--        .alert {-->
<!--            border-radius: 10px;-->
<!--            margin-bottom: 1.5rem;-->
<!--        }-->
<!--        -->
<!--        .form-control {-->
<!--            background-color: var(&#45;&#45;background-alt);-->
<!--            border: 1px solid var(&#45;&#45;primary-light);-->
<!--            color: var(&#45;&#45;text-primary);-->
<!--        }-->
<!--        -->
<!--        .form-control:focus {-->
<!--            background-color: var(&#45;&#45;background-alt);-->
<!--            border-color: var(&#45;&#45;secondary);-->
<!--            box-shadow: 0 0 0 0.2rem rgba(26, 188, 156, 0.25);-->
<!--            color: var(&#45;&#45;text-primary);-->
<!--        }-->
<!--        -->
<!--        .form-label {-->
<!--            color: var(&#45;&#45;text-primary);-->
<!--            font-weight: 500;-->
<!--        }-->
<!--        -->
<!--        .footer {-->
<!--            background-color: var(&#45;&#45;primary-dark);-->
<!--            color: var(&#45;&#45;white);-->
<!--            margin-top: auto;-->
<!--            padding: 2.5rem 0;-->
<!--        }-->
<!--        -->
<!--        @keyframes fadeInUp {-->
<!--            from {-->
<!--                opacity: 0;-->
<!--                transform: translateY(30px);-->
<!--            }-->
<!--            to {-->
<!--                opacity: 1;-->
<!--                transform: translateY(0);-->
<!--            }-->
<!--        }-->
<!--        -->
<!--        .animate {-->
<!--            opacity: 0;-->
<!--            animation: fadeInUp 0.8s ease forwards;-->
<!--        }-->
<!--        -->
<!--        @media (max-width: 768px) {-->
<!--            .card-body {-->
<!--                padding: 2rem 1.5rem;-->
<!--            }-->
<!--        }-->
<!--        -->
<!--        @media (max-width: 576px) {-->
<!--            .card-header {-->
<!--                padding: 1rem;-->
<!--            }-->
<!--            -->
<!--            .card-body {-->
<!--                padding: 1.5rem 1rem;-->
<!--            }-->
<!--            -->
<!--            .btn-primary {-->
<!--                padding: 0.7rem 2rem;-->
<!--            }-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--<nav th:replace="~{fragments/layout :: navbar}" class="navbar navbar-expand-lg navbar-dark fixed-top"></nav>-->

<!--<div th:replace="~{fragments/layout :: alerts}"></div>-->

<!--<div class="container py-5">-->
<!--    <div class="row justify-content-center">-->
<!--        <div class="col-md-6">-->
<!--            <div class="card shadow animate">-->
<!--                <div class="card-header text-white text-center">-->
<!--                    <h4 class="mb-0">Login to Your Account</h4>-->
<!--                </div>-->
<!--                <div class="card-body p-4">-->
<!--                    <div class="alert alert-danger" id="error-message" style="display: none;">-->
<!--                        Invalid email or password-->
<!--                    </div>-->
<!--                    <div class="alert alert-success" th:if="${param.logout}">-->
<!--                        You have been logged out-->
<!--                    </div>-->
<!--                    <div class="alert alert-danger" th:if="${param.error}">-->
<!--                        Invalid login attempt. Please try again.-->
<!--                    </div>-->

<!--                    <form id="loginForm">-->
<!--                        <div class="mb-3">-->
<!--                            <label for="email" class="form-label">Email</label>-->
<!--                            <input type="email" class="form-control" id="email" name="email" required autofocus>-->
<!--                        </div>-->
<!--                        <div class="mb-3">-->
<!--                            <label for="password" class="form-label">Password</label>-->
<!--                            <input type="password" class="form-control" id="password" name="password" required>-->
<!--                        </div>-->
<!--                        <div class="d-grid">-->
<!--                            <button type="submit" class="btn btn-primary">Login</button>-->
<!--                        </div>-->
<!--                    </form>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--<footer th:replace="~{fragments/layout :: footer}" class="footer mt-5"></footer>-->

<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>-->

<!--<script>-->
<!--    document.addEventListener('DOMContentLoaded', function() {-->
<!--        // Animate elements when they come into view-->
<!--        const animatedElements = document.querySelectorAll('.animate');-->
<!--        -->
<!--        const observer = new IntersectionObserver((entries) => {-->
<!--            entries.forEach(entry => {-->
<!--                if (entry.isIntersecting) {-->
<!--                    entry.target.classList.add('animated');-->
<!--                    observer.unobserve(entry.target);-->
<!--                }-->
<!--            });-->
<!--        }, { threshold: 0.1 });-->
<!--        -->
<!--        animatedElements.forEach(el => {-->
<!--            observer.observe(el);-->
<!--        });-->

<!--        // Auto-hide alerts after 5 seconds-->
<!--        setTimeout(function() {-->
<!--            const alerts = document.querySelectorAll('.alert');-->
<!--            alerts.forEach(function(alert) {-->
<!--                const bsAlert = new bootstrap.Alert(alert);-->
<!--                bsAlert.close();-->
<!--            });-->
<!--        }, 5000);-->

<!--        // Login form submission-->
<!--        document.getElementById('loginForm').addEventListener('submit', async function(e) {-->
<!--            e.preventDefault();-->

<!--            const email = document.getElementById('email').value;-->
<!--            const password = document.getElementById('password').value;-->
<!--            const errorMessageDiv = document.getElementById('error-message');-->

<!--            try {-->
<!--                const response = await fetch('/api/auth/login', {-->
<!--                    method: 'POST',-->
<!--                    headers: {-->
<!--                        'Content-Type': 'application/json'-->
<!--                    },-->
<!--                    body: JSON.stringify({ email, password })-->
<!--                });-->

<!--                if (response.ok) {-->
<!--                    const data = await response.json();-->
<!--                    window.location.href = '/auth/jwt-login?token=' + data.accessToken;-->
<!--                } else {-->
<!--                    errorMessageDiv.style.display = 'block';-->
<!--                    errorMessageDiv.textContent = 'Invalid email or password.';-->
<!--                }-->
<!--            } catch (error) {-->
<!--                console.error('Login error:', error);-->
<!--                errorMessageDiv.style.display = 'block';-->
<!--                errorMessageDiv.textContent = 'An error occurred. Please try again later.';-->
<!--            }-->
<!--        });-->

<!--        // Debugging script-->
<!--        const urlParams = new URLSearchParams(window.location.search);-->
<!--        if (urlParams.has('error')) {-->
<!--            console.error('Login error detected in URL parameter');-->
<!--        }-->
<!--        if (urlParams.has('debug')) {-->
<!--            console.log('Current URL:', window.location.href);-->
<!--        }-->
<!--    });-->
<!--</script>-->
<!--</body>-->
<!--</html>-->


<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en" data-bs-theme="dark">
<head th:replace="fragments/layout :: head('Login')">
    <title>Login - University Reminder System</title>
</head>
<body>
<nav th:replace="fragments/layout :: navbar" class="navbar navbar-expand-lg navbar-dark fixed-top"></nav>

<div th:replace="fragments/layout :: alerts"></div>

<style>
    :root{
        --primary:#2C3E50;--primary-dark:#1a2530;--primary-light:#34495e;
        --secondary:#1ABC9C;--secondary-light:#3498DB;
        --accent:#E67E22;--accent-alt:#2ECC71;
        --error:#E74C3C;--warning:#F1C40F;
        --background:#121212;--background-alt:#1e1e1e;
        --card-bg:#1e2a38;--text-primary:#e4e6eb;--text-secondary:#b0b3b8;--white:#FFFFFF;--dark:#0d1117;
    }
    body{
        background-color:var(--background);color:var(--text-primary);
        min-height:100vh;display:flex;flex-direction:column;
        font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;line-height:1.6;
        padding-top:72px;
    }
    .navbar{background-color:var(--primary-dark)!important;box-shadow:0 2px 15px rgba(0,0,0,.4);padding:.8rem 1rem}
    .navbar-brand,.nav-link{color:var(--white)!important;font-weight:500}
    .navbar-nav .nav-link:hover{color:var(--secondary)!important}

    /* Header strip */
    .page-header{
        background:linear-gradient(135deg,var(--primary) 0%,var(--primary-dark) 100%);
        border-radius:0 0 24px 24px;color:var(--white);
        padding:2.25rem 1rem;margin:-24px 0 2rem;position:relative;overflow:hidden;
        box-shadow:0 10px 30px rgba(0,0,0,.35);
        text-align:center;
    }
    .page-header::before{
        content:'';position:absolute;inset:0;opacity:.35;
        background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='%231ABC9C' fill-opacity='0.25' d='M0,128L48,117.3C96,107,192,85,288,112C384,139,480,213,576,218.7C672,224,768,160,864,138.7C960,117,1056,139,1152,149.3C1248,160,1344,160,1392,160L1440,160L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E") center/cover no-repeat;
    }
    .page-title{
        font-weight:800;margin:0;background:linear-gradient(to right,var(--white),var(--secondary));
        -webkit-background-clip:text;-webkit-text-fill-color:transparent
    }
    .page-sub{color:var(--text-secondary);font-weight:300;margin-top:.25rem}

    /* Card */
    .card{
        background-color:var(--card-bg);border:none;border-radius:16px;overflow:hidden;
        box-shadow:0 12px 30px rgba(0,0,0,.28);transition:transform .3s ease, box-shadow .3s ease
    }
    .card:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(0,0,0,.35)}
    .card-header{
        background:linear-gradient(135deg,var(--secondary) 0%,var(--secondary-light) 100%)!important;
        color:#0d1117;border:none
    }
    .card-body{padding:2rem}

    /* Form */
    .form-label{color:var(--white);font-weight:600}
    .form-control{
        background-color:var(--background-alt);border:1px solid rgba(255,255,255,.08);
        color:var(--text-primary);border-radius:12px;padding:.7rem .9rem;
        transition:border-color .2s, box-shadow .2s
    }
    .form-control:focus{
        border-color:var(--secondary);box-shadow:0 0 0 .2rem rgba(26,188,156,.15)
    }

    .alert{border-radius:12px}

    /* Button */
    .btn-primary{
        background:linear-gradient(135deg,var(--accent) 0%,var(--accent-alt) 100%);
        border:none;font-weight:700;border-radius:50px;padding:.8rem 1rem;
        transition:all .3s ease;box-shadow:0 4px 15px rgba(230,126,34,.3);position:relative;overflow:hidden;z-index:1
    }
    .btn-primary::before{
        content:'';position:absolute;inset:0;width:0%;height:100%;
        background:linear-gradient(135deg,var(--accent-alt) 0%,var(--accent) 100%);
        transition:all .5s ease;z-index:-1;border-radius:50px
    }
    .btn-primary:hover::before{width:100%}
    .btn-primary:hover{transform:translateY(-2px);box-shadow:0 10px 20px rgba(230,126,34,.4)}

    /* Animations */
    @keyframes fadeInUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
    .animate{opacity:0;animation:fadeInUp .6s ease forwards}
    .delay-1{animation-delay:.15s}.delay-2{animation-delay:.3s}
</style>

<div class="container py-5">
    <!-- Fancy header -->
    <div class="page-header animate">
        <h1 class="page-title">Login</h1>
        <h6 class="page-sub">Welcome back — let’s get you in</h6>
    </div>

    <div class="row justify-content-center animate delay-1">
        <div class="col-md-6 col-lg-5">
            <div class="card">
                <div class="card-header text-center">
                    <h4 class="mb-0">Login to Your Account</h4>
                </div>
                <div class="card-body">
                    <div class="alert alert-danger" id="error-message" style="display: none;">
                        Invalid email or password
                    </div>
                    <div class="alert alert-success" th:if="${param.logout}">
                        You have been logged out
                    </div>
                    <div class="alert alert-danger" th:if="${param.error}">
                        Invalid login attempt. Please try again.
                    </div>

                    <form id="loginForm">
                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" name="email" required autofocus>
                        </div>
                        <div class="mb-4">
                            <label for="password" class="form-label">Password</label>
                            <input type="password" class="form-control" id="password" name="password" required>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">Login</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<footer th:replace="fragments/layout :: footer" class="mt-auto"></footer>

<script>
    document.getElementById('loginForm').addEventListener('submit', async function(e) {
        e.preventDefault();

        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        const errorMessageDiv = document.getElementById('error-message');

        try {
            const response = await fetch('/api/auth/login', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ email, password })
            });

            if (response.ok) {
                const data = await response.json();
                window.location.href = '/auth/jwt-login?token=' + data.accessToken;
            } else {
                errorMessageDiv.style.display = 'block';
                errorMessageDiv.textContent = 'Invalid email or password.';
            }
        } catch (error) {
            console.error('Login error:', error);
            errorMessageDiv.style.display = 'block';
            errorMessageDiv.textContent = 'An error occurred. Please try again later.';
        }
    });
</script>
</body>
</html>
